{% extends 'base_chat.html' %}
{% load static %}

{% block meta %}
<meta name="description" content="Chat con el asistente de legal">
{% endblock %}

{% block title %}
Chat con el asistente de legal
{% endblock %}

{% block body_class %}h-full flex flex-col{% endblock %}

{% block content %}
<div class="flex flex-col h-full">
    {% include 'navbar_chat.html' with title='Asistente Legal' %}
    <main class="flex-1 bg-base-200 p-4">
        <div class="container mx-auto h-full">
            <div class="max-w-4xl mx-auto h-full">
                <!-- Chat -->
                <div id="chat-container" class="card bg-base-100 flex-1 flex flex-col rounded-2xl border border-base-200"
                    >
                    <div class="card-body p-0 flex flex-col h-[calc(100vh-10rem)]">
                        <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-base-100" id="messages">
                            <!-- Los mensajes se insertarán aquí dinámicamente -->
                        </div>
                        <div class="card-actions p-4 bg-base-100 mt-auto border-t border-base-200">
                            <form id="chat-form" class="flex gap-2 w-full">
                                {% csrf_token %}
                                <input id="message-input" type="text" placeholder="Escribe tu mensaje..."
                                    class="input input-bordered flex-1 rounded-full bg-base-200 border-none focus:bg-base-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 shadow-[0_2px_8px_rgba(0,0,0,0.08)]" />
                                <button id="send-button" type="submit"
                                    class="btn bg-primary text-primary-content rounded-full hover:bg-primary-focus border-none shadow-[0_2px_8px_rgba(59,130,246,0.3)] disabled:opacity-50 disabled:cursor-not-allowed">
                                    Enviar
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Fin Chat -->
            </div>
        </div>
    </main>
    {% include 'footer.html' with footer_text='magoreal' %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/chat.js' %}"></script>
{% endblock %}